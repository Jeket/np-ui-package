<div [ngClass]="{ 'np-date-picker': true, 'np-disabled': isDisabled , 'np-readonly': readonly }" [class]="styleClass"
    [attr.id]="inputId">
    <div class="np-input-group" *ngIf="!defaultOpen; else templatePortalContent">
        <input class="np-form-control" type="text" [value]="value | date: format" [placeholder]="placeholder"
            [disabled]="isDisabled" [autofocus]="autoFocus" (click)="_open()" (keydown)="_onKeydown($event)"
            (change)="_onInputChange($event)">
        <div class="np-input-group-append">
            <button class="np-btn-icon np-btn-clear" type="button" tabindex="-1" title="Clear" (click)="_clear()">
                <svg class="np-icon" viewBox="0 0 24 24">
                    <path
                        d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                    <path d="M0 0h24v24H0z" fill="none" />
                </svg>
            </button>
            <button class="np-btn-icon np-toggle-overlay" type="button" tabindex="-1" (click)="_toggleDatePicker()">
                <svg class="np-icon" viewBox="0 0 24 24">
                    <path
                        d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z" />
                    <path fill="none" d="M0 0h24v24H0z" />
                </svg>
            </button>
        </div>
    </div>
</div>

<ng-template #templatePortalContent>
    <div class="np-date-picker-overlay" [ngClass]="{'np-overlay-open': defaultOpen}">
        <div class="np-date-picker-header">
            <button class="np-btn-icon" type="button" tabindex="-1" title="Previous" (click)="_prevMonth()">
                <svg class="np-icon" viewBox="0 0 24 24">
                    <path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z" />
                    <path fill="none" d="M0 0h24v24H0V0z" />
                </svg>
            </button>
            <input type="number" tabindex="-1" class="np-form-control np-date-picker-years" [(ngModel)]="currentYear"
                (change)="_selectYear()" required>
            <select class="np-form-control np-date-picker-months" tabindex="-1" (change)="_selectMonth($event)">
                <option *ngFor="let month of months" [value]="month.key" [text]="month.value"
                    [selected]="month.key == currentMonth">
                </option>
            </select>
            <button class="np-btn-icon" type="button" tabindex="-1" title="Next" (click)="_nextMonth()">
                <svg class="np-icon" viewBox="0 0 24 24">
                    <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z" />
                    <path fill="none" d="M0 0h24v24H0V0z" />
                </svg>
            </button>
        </div>
        <div class="np-weekdays">
            <ng-container *ngFor="let weekDay of weekDays;let i = index;">
                <div class="np-dp-weekday" [innerHTML]="weekDay"></div>
            </ng-container>
        </div>
        <div class="np-date-picker-days">
            <div *ngFor="let day of days; let i = index;" class="np-date-picker-day" (click)="_selectDate(day)"
                [ngClass]="{'np-date-picker-today': _checkIsToday(day), 'np-disabled' : _checkIsDateDisabled(currentYear,currentMonth,day), 'np-date-picker-selected': _checkIsSelected(day)}">
                <div *ngIf="_getTooltip(currentYear,currentMonth,day); let label; else dayTemplate"
                    [np-tooltip]="label">
                    {{day}}
                </div>
                <ng-template #dayTemplate>
                    {{day}}
                </ng-template>
            </div>
        </div>
        <div class="np-date-picker-footer">
            <button *ngIf="!defaultOpen" class="np-btn np-btn-primary np-ok" type="button" tabindex="-1"
                (click)="_close()">Ok</button>
            <button *ngIf="showTodayButton" class="np-btn np-btn-primary np-today" type="button" tabindex="-1"
                (click)="_setToday()">Today</button>
            <button class="np-btn np-btn-danger np-clear" type="button" tabindex="-1" (click)="_clear()">Clear</button>
        </div>
    </div>
</ng-template>