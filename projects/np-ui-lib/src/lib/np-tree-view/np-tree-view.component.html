<div [ngClass]="{ 'np-treeview': true }" [class]="styleClass" [attr.id]="inputId">
    <ng-container *ngTemplateOutlet="treeViewTemplate; context: { items: items }">
    </ng-container>
</div>

<ng-template #treeViewTemplate let-items="items">
    <div *ngFor="let item of items; trackBy: _trackBy;" class="np-treeview-node">
        <ng-container *ngIf="item.childItems">
            <button *ngIf="item.isExpanded" type="button" class="np-btn-icon np-treeview-collapse"
                (click)="_collapse(item)" title="Collapse">
                <svg class="np-icon" viewBox="0 0 24 24">
                    <path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z" />
                    <path d="M0 0h24v24H0z" fill="none" />`
                </svg>
            </button>
            <button *ngIf="!item.isExpanded" type="button" class="np-btn-icon np-treeview-expand"
                (click)="_expand(item)" title="Expand">
                <svg class="np-icon" viewBox="0 0 24 24">
                    <path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z" />
                    <path d="M0 0h24v24H0z" fill="none" />
                </svg>
            </button>
        </ng-container>
        <div class="np-treeview-label">
            <input *ngIf="selectionMode" type="checkbox" class="np-treeview-checkbox" [checked]="_isSelected(item)"
                [indeterminate]="item.partiallySelected" (change)="_changeSelection($event,item)">
            <label (click)="_onClick(item)"><i *ngIf="item.iconCss"
                    [ngClass]="item.iconCss"></i>{{item.label}}</label>
        </div>
        <ng-container *ngIf="item.childItems && item.isExpanded">
            <ng-container *ngTemplateOutlet="treeViewTemplate; context: { items: item.childItems }">
            </ng-container>
        </ng-container>
    </div>
</ng-template>